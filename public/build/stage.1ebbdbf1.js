(self.webpackChunk=self.webpackChunk||[]).push([[906],{8471:(e,t,r)=>{var a=r(9755);function o(e,t,r,a,o,n,i){try{var l=e[n](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(a,o)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function l(e){o(i,a,n,l,c,"next",e)}function c(e){o(i,a,n,l,c,"throw",e)}l(void 0)}))}}r(3076),r(3710),r(7042),r(9826),r(1539),r(9554),r(4747),r(8674);var i=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});a(document).ready((function(){function e(e,t,r){return a(".loader2").show(),a.ajax({type:"POST",url:"/api/Seance_aff/"+e+"/"+t+"/"+r,success:function(e){a(".loader2").hide(),a.fn.DataTable.isDataTable("#dtDynamicVerticalScrollExample")&&a("#dtDynamicVerticalScrollExample").DataTable().clear().destroy(),a("#dtDynamicVerticalScrollExample").html(e).DataTable({bLengthChange:!1,lengthMenu:[[10,20,30,40,50,2e13],[10,15,25,50,100,"All"]],"font-size":"3rem"})},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}}),e}a("#dtDynamicVerticalScrollExample").DataTable({bLengthChange:!1,lengthMenu:[[13,25,35,50,100,2e13],[10,15,25,50,100,"All"]]}),a("#etablissement").prop("selectedIndex",1),a("#formation").prop("selectedIndex",1),a("#promotion").prop("selectedIndex",1);var t=new Date,r=("0"+t.getDate()).slice(-2),o=("0"+(t.getMonth()+1)).slice(-2),l=t.getFullYear()+"-"+o+"-"+r;a("#datetime").val(l);var c=a("#promotion").val(),s=[];e(c,l,"stage"),a("#etablissement").on("change",(function(){var t=a(this).val();a.ajax({type:"POST",url:"/api/Formation_aff/"+t,success:function(t){a(".loader2").hide(),a("#formation").html(t),a("#formation").prop("selectedIndex",1),a.ajax({type:"POST",url:"/api/Promotion_aff/"+a("#formation").val(),success:function(t){a(".loader2").hide(),a("#promotion").html(t),a("#promotion").prop("selectedIndex",1),e(a("#promotion").val(),a("#datetime").val(),"stage")},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})})),a("#formation").on("change",(function(){var t=a(this).val();a.ajax({type:"POST",url:"/api/Promotion_aff/"+t,success:function(t){a(".loader2").hide(),a("#promotion").html(t),a("#promotion").prop("selectedIndex",1),e(a("#promotion").val(),a("#datetime").val(),"stage")},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})})),a("#promotion").on("change",(function(){e(a(this).val(),a("#datetime").val(),"stage")})),a("#datetime").on("change",(function(){var t=a(this).val();e(a("#promotion").val(),t,"stage")})),a("body #dtDynamicVerticalScrollExample").on("click","tr",(function(){var e=a(this).hasClass("highlighty");if(a("body #dtDynamicVerticalScrollExample tr").removeClass("highlighty"),a("body #dtDynamicVerticalScrollExample tr").removeClass("odd"),a("body #dtDynamicVerticalScrollExample tr").removeClass("even"),!e){a(this).addClass("highlighty");var t=a(this).closest("tr"),r=t.find("td:eq(1)").html();(s=[]).push({promotion:t.find("td:eq(2)").html(),seance:t.find("td:eq(3)").html(),groupe:t.find("td:eq(10)").html(),hd:t.find("td:eq(8)").html(),module:t.find("td:eq(14)").html(),sale:t.find("td:eq(15)").html(),existe:t.find("td:eq(11)").html(),statut:t.find("td:eq(1)").html()}),a("#traite_epreuve").hide(),a("#retraiter_seance").hide(),a("#deverouiller-modal").hide(),a("#verouiller-modal").hide(),a("#assiduite_print").hide(),"1"==r&&(a("#traite_epreuve").css({display:"none"}),a("#retraiter_seance").show(),a("#verouiller-modal").show(),a("#assiduite_print").show()),"2"==r?(a("#deverouiller-modal").show(),a("#assiduite_print").show()):a("#traite_epreuve").show()}"1"!=r&&"2"!=r||s.forEach((function(e){a.ajax({type:"POST",url:"/api/count_seance/"+e.seance,data:{seance:e.seance},success:function(e){a(".loader2").hide(),a(".grid").html(e)},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #dtDynamicVerticalScrollExample").on("dblclick","tr",(function(){a("#etudiant-modal").modal("toggle"),a("#etudiant-modal").modal("show"),s.forEach((function(e){a("#Seance_etud").val(e.seance),a("#salle_etud").val(e.nature+" / "+e.salle),a("#element_etud").val(e.element),a("#Enseignant_etud").val(e.enseignant),a("#Hd_etud").val(e.hd),a("#Hf_etud").val(e.hf),a("#group_etud").val(e.groupe),a(".loader2").hide(),a.ajax({type:"POST",url:"/api/Etud_aff",data:{promotion:e.promotion,seance:e.seance,groupe:e.groupe,existe:e.existe},success:function(e){a.fn.DataTable.isDataTable("#dtDynamicVerticalScrollExample2")&&a("#dtDynamicVerticalScrollExample2").DataTable().clear().destroy(),a("#dtDynamicVerticalScrollExample2").html(e).DataTable({bLengthChange:!1,lengthMenu:[[12,24,36,48,60,2e13],[10,15,25,50,100,"All"]]})},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #pointage").on("click",(function(){s.forEach((function(e){1==e.statut&&a.ajax({type:"POST",url:"/api/Etud_pointage",data:{promo:a("#promotion").val(),date:a("#datetime").val(),hd:e.hd},success:function(e){a.fn.DataTable.isDataTable("#dtDynamicVerticalScrollExample4")&&a("#dtDynamicVerticalScrollExample4").DataTable().clear().destroy(),a("#dtDynamicVerticalScrollExample4").html(e).DataTable({bLengthChange:!1,lengthMenu:[[16,32,48,64,74,2e13],[10,15,25,50,100,"All"]]}),a(".loader2").hide()},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #traite_epreuve").on("click",(function(){s.forEach((function(t){""===t.groupe&&(t.groupe="empty"),"1"!=t.statut?a.ajax({type:"POST",url:"/api/traitement_assiduite",data:{seance:t.seance,date:a("#datetime").val(),type:"traite"},success:function(t){a(".loader2").hide(),e(a("#promotion").val(),a("#datetime").val(),"CR"),i.fire({icon:"success",title:"seance traité avec succes"}),a(".grid").html(t),a("#traite_epreuve").hide(),a("#retraiter_seance").hide(),a("#deverouiller-modal").hide(),a("#verouiller-modal").hide(),a("#assiduite_print").hide(),a("#retraiter_seance").show(),a("#verouiller-modal").show(),a("#assiduite_print").show()},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}}):(a(".loader2").hide(),i.fire({icon:"error",title:"seance deja traité"}))}))})),a("body #retraiter_seance").on("click",(function(){s.forEach((function(t){""===t.groupe&&(t.groupe="empty"),a.ajax({type:"POST",url:"/api/traitement_assiduite",data:{seance:t.seance,date:a("#datetime").val(),type:"retraite"},success:function(t){a(".loader2").hide(),e(a("#promotion").val(),a("#datetime").val(),"CR"),a(".grid").html(t),a("#traite_epreuve").hide(),a("#retraiter_seance").hide(),a("#deverouiller-modal").hide(),a("#verouiller-modal").hide(),a("#assiduite_print").hide(),a("#retraiter_seance").show(),a("#verouiller-modal").show(),a("#assiduite_print").show()},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #assiduite_print").on("click",(function(){s.forEach((function(e){window.open("/assiduite/assiduites/pdf/"+e.seance,"_blank")}))})),a("body #remove").on("click",(function(){s.forEach((function(t){a.ajax({type:"POST",url:"/api/remove_seance/"+t.seance,data:{seance:t.seance},success:function(t){a(".loader2").hide(),e(a("#promotion").val(),a("#datetime").val(),"CR")},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #existe").on("click",(function(){s.forEach((function(t){a.ajax({type:"POST",url:"/api/exist_seance/"+t.seance,data:{seance:t.seance},success:function(t){a(".loader2").hide(),e(a("#promotion").val(),a("#datetime").val(),"CR")},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #sign").on("click",(function(){s.forEach((function(t){a.ajax({type:"POST",url:"/api/sign_seance/"+t.seance,data:{seance:t.seance},success:function(t){a(".loader2").hide(),i.fire({icon:"success",title:"seance signé"}),e(a("#promotion").val(),a("#datetime").val(),"CR")},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #cancel").on("click",(function(){s.forEach((function(t){a.ajax({type:"POST",url:"/api/cancel_seance/"+t.seance,data:{seance:t.seance},success:function(t){e(a("#promotion").val(),a("#datetime").val(),"CR"),a(".loader2").hide()},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #deverouiller-modal").on("click",(function(){s.forEach((function(t){a.ajax({type:"POST",url:"/api/dever_seance/"+t.seance,data:{seance:t.seance},success:function(t){e(a("#promotion").val(),a("#datetime").val(),"CR"),a(".loader2").hide()},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #modisalle").on("click",(function(){var t=a("#salle").val();s.forEach((function(r){a.ajax({type:"POST",url:"/api/modifier_salle/"+r.seance+"/"+t,data:{seance:r.seance},success:function(t){a(".loader2").hide(),e(a("#promotion").val(),a("#datetime").val(),"CR")},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("body #verouiller-modal").on("click",(function(){s.forEach((function(t){a.ajax({type:"POST",url:"/api/lock_seance/"+t.seance,data:{seance:t.seance},success:function(t){e(a("#promotion").val(),a("#datetime").val(),"CR"),a(".loader2").hide()},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})}))})),a("button").on("click",(function(){a(".loader2").fadeIn()})),a(".close").on("click",(function(){a(".loader2").fadeOut()})),a("body #parlot_search").on("click",(function(){var e=a("#hd").val(),t=a("#hf").val(),r=a("#datetime").val();a.ajax({type:"POST",url:"/api/parlot",data:{hd:e,hf:t,date:r,type:"stage"},success:function(e){a(".loader2").hide(),a.fn.DataTable.isDataTable("#parlot_datatable")&&a("#parlot_datatable").DataTable().clear().destroy(),a("#parlot_datatable").html(e).DataTable({bLengthChange:!1,lengthMenu:[[11,25,35,50,100,2e13],[10,15,25,50,100,"All"]],"font-size":"3rem"})},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}})})),a("body #parlot_traiter").on("click",n(regeneratorRuntime.mark((function e(){var t,r,o,n,l,c,s,d,u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a("#hd").val(),r=a("#hf").val(),o=a("#datetime").val(),n=[],a(":checkbox:checked").each((function(e){n[e]=a(this).val()})),l=0,c=n;case 6:if(!(l<c.length)){e.next=20;break}return s=c[l],e.prev=8,e.next=11,a.ajax({type:"POST",url:"/api/traitement_assiduite",data:{seance:s,date:a("#datetime").val(),type:"traite"}});case 11:e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.error(e.t0);case 17:l++,e.next=6;break;case 20:for(a.ajax({type:"POST",url:"/api/parlot",data:{hd:t,hf:r,date:o},success:function(e){a(".loader2").hide(),a.fn.DataTable.isDataTable("#parlot_datatable")&&a("#parlot_datatable").DataTable().clear().destroy(),a("#parlot_datatable").html(e).DataTable({bLengthChange:!1,lengthMenu:[[11,25,35,50,100,2e13],[10,15,25,50,100,"All"]],"font-size":"3rem"})},error:function(){a(".loader2").hide(),i.fire({icon:"error",title:"Probleme  !"})}}),d=0,u=n;d<u.length;d++)f=u[d],window.open("/assiduite/assiduites/pdf/"+f,"_blank");a(".loader2").hide();case 23:case"end":return e.stop()}}),e,null,[[8,14]])})))),a("body #check").on("click",(function(){!function(){for(var e=document.getElementsByName("chk"),t=0;t<e.length;t++)"checkbox"==e[t].type&&(e[t].checked=!0)}(),a(".loader2").hide()})),a("body #uncheck").on("click",(function(){!function(){for(var e=document.getElementsByName("chk"),t=0;t<e.length;t++)"checkbox"==e[t].type&&(e[t].checked=!1)}(),a(".loader2").hide()}))}))},1223:(e,t,r)=>{var a=r(5112),o=r(30),n=r(3070),i=a("unscopables"),l=Array.prototype;null==l[i]&&n.f(l,i,{configurable:!0,value:o(null)}),e.exports=function(e){l[i][e]=!0}},8533:(e,t,r)=>{"use strict";var a=r(2092).forEach,o=r(9341)("forEach");e.exports=o?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},2092:(e,t,r)=>{var a=r(9974),o=r(1702),n=r(8361),i=r(7908),l=r(6244),c=r(5417),s=o([].push),d=function(e){var t=1==e,r=2==e,o=3==e,d=4==e,u=6==e,f=7==e,h=5==e||u;return function(p,m,v,y){for(var b,g,x=i(p),S=n(x),T=a(m,v),_=l(S),P=0,E=y||c,D=t?E(p,_):r||f?E(p,0):void 0;_>P;P++)if((h||P in S)&&(g=T(b=S[P],P,x),e))if(t)D[P]=g;else if(g)switch(e){case 3:return!0;case 5:return b;case 6:return P;case 2:s(D,b)}else switch(e){case 4:return!1;case 7:s(D,b)}return u?-1:o||d?d:D}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},1194:(e,t,r)=>{var a=r(7293),o=r(5112),n=r(7392),i=o("species");e.exports=function(e){return n>=51||!a((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:(e,t,r)=>{"use strict";var a=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},7475:(e,t,r)=>{var a=r(7854),o=r(3157),n=r(4411),i=r(111),l=r(5112)("species"),c=a.Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,(n(t)&&(t===c||o(t.prototype))||i(t)&&null===(t=t[l]))&&(t=void 0)),void 0===t?c:t}},5417:(e,t,r)=>{var a=r(7475);e.exports=function(e,t){return new(a(e))(0===t?0:t)}},6135:(e,t,r)=>{"use strict";var a=r(4948),o=r(3070),n=r(9114);e.exports=function(e,t,r){var i=a(t);i in e?o.f(e,i,n(0,r)):e[i]=r}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(e,t,r)=>{var a=r(317)("span").classList,o=a&&a.constructor&&a.constructor.prototype;e.exports=o===Object.prototype?void 0:o},3157:(e,t,r)=>{var a=r(4326);e.exports=Array.isArray||function(e){return"Array"==a(e)}},30:(e,t,r)=>{var a,o=r(9670),n=r(6048),i=r(748),l=r(3501),c=r(490),s=r(317),d=r(6200),u=d("IE_PROTO"),f=function(){},h=function(e){return"<script>"+e+"</"+"script>"},p=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{a=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&a?p(a):((t=s("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):p(a);for(var r=i.length;r--;)delete m.prototype[i[r]];return m()};l[u]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f.prototype=o(e),r=new f,f.prototype=null,r[u]=e):r=m(),void 0===t?r:n(r,t)}},6048:(e,t,r)=>{var a=r(9781),o=r(3070),n=r(9670),i=r(5656),l=r(1956);e.exports=a?Object.defineProperties:function(e,t){n(e);for(var r,a=i(t),c=l(t),s=c.length,d=0;s>d;)o.f(e,r=c[d++],a[r]);return e}},1956:(e,t,r)=>{var a=r(6324),o=r(748);e.exports=Object.keys||function(e){return a(e,o)}},9826:(e,t,r)=>{"use strict";var a=r(2109),o=r(2092).find,n=r(1223),i="find",l=!0;i in[]&&Array(1).find((function(){l=!1})),a({target:"Array",proto:!0,forced:l},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(i)},9554:(e,t,r)=>{"use strict";var a=r(2109),o=r(8533);a({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},7042:(e,t,r)=>{"use strict";var a=r(2109),o=r(7854),n=r(3157),i=r(4411),l=r(111),c=r(1400),s=r(6244),d=r(5656),u=r(6135),f=r(5112),h=r(1194),p=r(206),m=h("slice"),v=f("species"),y=o.Array,b=Math.max;a({target:"Array",proto:!0,forced:!m},{slice:function(e,t){var r,a,o,f=d(this),h=s(f),m=c(e,h),g=c(void 0===t?h:t,h);if(n(f)&&(r=f.constructor,(i(r)&&(r===y||n(r.prototype))||l(r)&&null===(r=r[v]))&&(r=void 0),r===y||void 0===r))return p(f,m,g);for(a=new(void 0===r?y:r)(b(g-m,0)),o=0;m<g;m++,o++)m in f&&u(a,o,f[m]);return a.length=o,a}})},3710:(e,t,r)=>{var a=r(1702),o=r(1320),n=Date.prototype,i="Invalid Date",l="toString",c=a(n.toString),s=a(n.getTime);String(new Date(NaN))!=i&&o(n,l,(function(){var e=s(this);return e==e?c(this):i}))},4747:(e,t,r)=>{var a=r(7854),o=r(8324),n=r(8509),i=r(8533),l=r(8880),c=function(e){if(e&&e.forEach!==i)try{l(e,"forEach",i)}catch(t){e.forEach=i}};for(var s in o)o[s]&&c(a[s]&&a[s].prototype);c(n)}},e=>{e.O(0,[9755,6488,8029],(()=>{return t=8471,e(e.s=t);var t}));e.O()}]);