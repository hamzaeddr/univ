(self.webpackChunk=self.webpackChunk||[]).push([[2345],{3967:(e,a,r)=>{var t=r(9755);function n(e,a,r,t,n,s,i){try{var o=e[s](i),l=o.value}catch(e){return void r(e)}o.done?a(l):Promise.resolve(l).then(t,n)}function s(e){return function(){var a=this,r=arguments;return new Promise((function(t,s){var i=e.apply(a,r);function o(e){n(i,t,s,o,l,"next",e)}function l(e){n(i,t,s,o,l,"throw",e)}o(void 0)}))}}r(3076),r(9554),r(1539),r(4747),r(9826),r(2772),r(561),r(1249),r(2564),r(8674);var i=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}),o=0,l=null,c=[],p=[];t(document).ready((function(){var e=t("#list_epreuve_normal").DataTable({lengthMenu:[[10,15,25,50,100,2e13],[10,15,25,50,100,"All"]],order:[[0,"desc"]],ajax:"/administration/epreuve/list/normal",processing:!0,serverSide:!0,deferRender:!0,drawCallback:function(){c.forEach((function(e){t("body tr#"+e).find("input").prop("checked",!0)})),t("body tr#"+l).addClass("active_databales")},language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json"}}),a=t("#list_epreuve_rattrapage").DataTable({lengthMenu:[[10,15,25,50,100,2e13],[10,15,25,50,100,"All"]],order:[[0,"desc"]],ajax:"/administration/epreuve/list/rattrapage",processing:!0,serverSide:!0,deferRender:!0,drawCallback:function(){c.forEach((function(e){t("body tr#"+e).find("input").prop("checked",!0)})),t("body tr#"+l).addClass("active_databales")},language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json"}});t("body").on("click","#list_epreuve_normal tbody tr",(function(){var e=t(this).find("input");if(e.is(":checked")){e.prop("checked",!1);var a=c.indexOf(e.attr("id"));c.splice(a,1)}else e.prop("checked",!0),c.push(e.attr("id"))})),t("body").on("click","#list_epreuve_rattrapage tbody tr",(function(){var e=t(this).find("input");if(e.is(":checked")){e.prop("checked",!1);var a=c.indexOf(e.attr("id"));c.splice(a,1)}else e.prop("checked",!0),c.push(e.attr("id"))})),t("body").on("dblclick","#list_epreuve_normal tbody tr",(function(){t(this).hasClass("active_databales")?(t(this).removeClass("active_databales"),t("#inscription-modal").attr("disabled",!0),l=null):(t("#list_epreuve_normal tbody tr").removeClass("active_databales"),t("#list_epreuve_rattrapage tbody tr").removeClass("active_databales"),t(this).addClass("active_databales"),l=t(this).attr("id"))})),t("body").on("dblclick","#list_epreuve_rattrapage tbody tr",(function(){t(this).hasClass("active_databales")?(t(this).removeClass("active_databales"),t("#inscription-modal").attr("disabled",!0),l=null):(t("#list_epreuve_normal tbody tr").removeClass("active_databales"),t("#list_epreuve_rattrapage tbody tr").removeClass("active_databales"),t(this).addClass("active_databales"),l=t(this).attr("id"))})),t(".nav-pills a").on("click",(function(e){t(this).tab("show"),l=null,c=[],t("#list_epreuve_normal tbody tr").removeClass("active_databales"),t("#list_epreuve_rattrapage tbody tr").removeClass("active_databales"),t("input").prop("checked",!1),o="Session normal"==t(this).html()?0:1})),t("#import_epreuve").on("click",(function(){t("#import_en_masse").modal("show"),t("#import_en_masse .modal-body .alert").remove()})),t("#epreuve_canvas").on("click",(function(){window.open("/administration/epreuve/canvas","_blank")})),t("#import_epreuve_save").on("submit",function(){var r=s(regeneratorRuntime.mark((function r(n){var s,i,o,l,c,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),s=new FormData(t(this)[0]),(i=t("#import_en_masse .modal-body .alert")).remove(),(o=t("#epreuve_enregistre i")).removeClass("fa-check-circle").addClass("fa-spinner fa-spin"),r.prev=6,r.next=9,axios.post("/administration/epreuve/import",s);case 9:l=r.sent,c=l.data,t("#import_en_masse .modal-body").prepend('<div class="alert alert-success">\n                <p>'.concat(c.message,"</p>\n              </div>")),window.open("/"+c.file,"_blank"),o.addClass("fa-check-circle").removeClass("fa-spinner fa-spin "),e.ajax.reload(null,!1),a.ajax.reload(null,!1),r.next=25;break;case 18:r.prev=18,r.t0=r.catch(6),p=r.t0.response.data,console.log(r.t0,r.t0.response),i.remove(),t("#import_en_masse .modal-body").prepend('<div class="alert alert-danger">'.concat(p,"</div>")),o.addClass("fa-check-circle").removeClass("fa-spinner fa-spin ");case 25:case"end":return r.stop()}}),r,this,[[6,18]])})));return function(e){return r.apply(this,arguments)}}()),t("#affilier_etudiant").on("click",function(){var r=s(regeneratorRuntime.mark((function r(n){var s,p,u,d,f,m,v,h,_;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),0!==o){r.next=29;break}if(0!=c.length){r.next=5;break}return i.fire({icon:"error",title:"Veuillez cochez une ou plusieurs ligne!"}),r.abrupt("return");case 5:return(s=t("#affilier_etudiant i")).removeClass("fa-link").addClass("fa-spinner fa-spin"),r.prev=7,(p=new FormData).append("epreuves",JSON.stringify(c)),r.next=12,axios.post("/administration/epreuve/affiliation_normale",p);case 12:u=r.sent,d=u.data,s.addClass("fa-link").removeClass("fa-spinner fa-spin "),d.total>0?window.open("/"+d.zipname,"_blank"):i.fire({icon:"info",title:"Epreuves d√©ja affilier ou valider"}),e.ajax.reload(null,!1),a.ajax.reload(null,!1),c=[],r.next=27;break;case 21:r.prev=21,r.t0=r.catch(7),console.log(r.t0),f=r.t0.response.data,i.fire({icon:"error",title:f}),s.addClass("fa-link").removeClass("fa-spinner fa-spin ");case 27:r.next=52;break;case 29:if(l){r.next=32;break}return i.fire({icon:"error",title:"Veuillez selection une ligne!"}),r.abrupt("return");case 32:return(m=t("#affilier_etudiant i")).removeClass("fa-link").addClass("fa-spinner fa-spin"),r.prev=34,r.next=37,axios.get("/administration/epreuve/etudiants/"+l);case 37:v=r.sent,h=v.data,m.addClass("fa-link").removeClass("fa-spinner fa-spin "),t(".list_etudiants").html(h),t(".check_all_etudiant").prop("checked",!1),t("#affilier_list_etudiant").modal("show"),t("#affilier_list_etudiant .modal-body .alert").remove(),r.next=52;break;case 46:r.prev=46,r.t1=r.catch(34),console.log(r.t1),_=r.t1.response.data,i.fire({icon:"error",title:_}),m.addClass("fa-link").removeClass("fa-spinner fa-spin ");case 52:case"end":return r.stop()}}),r,null,[[7,21],[34,46]])})));return function(e){return r.apply(this,arguments)}}()),t("body").on("click",".check_etudiant",(function(){var e=p.indexOf(t(this).val());-1!=e?p.splice(e,1):p.push(t(this).val()),console.log(p)})),t("body").on("click",".check_all_etudiant",(function(){p=[];var e=t(".check_etudiant");1==t(".check_all_etudiant").prop("checked")?(e.prop("checked",!0),e.map((function(){p.push(this.value)}))):e.prop("checked",!1),console.log(p)})),t("#cloture_epreuve").on("click",function(){var r=s(regeneratorRuntime.mark((function r(n){var s,o,l,p,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),0!=c.length){r.next=4;break}return i.fire({icon:"error",title:"Veuillez cochez une ou plusieurs ligne!"}),r.abrupt("return");case 4:return(s=t("#cloture_epreuve i")).removeClass("fa-lock").addClass("fa-spinner fa-spin"),(o=new FormData).append("idEpreuves",JSON.stringify(c)),r.prev=8,r.next=11,axios.post("/administration/epreuve/cloture",o);case 11:l=r.sent,p=l.data,s.addClass("fa-lock").removeClass("fa-spinner fa-spin"),i.fire({icon:"success",title:p}),c=[],a.ajax.reload(null,!1),e.ajax.reload(null,!1),r.next=26;break;case 20:r.prev=20,r.t0=r.catch(8),console.log(r.t0),u=r.t0.response.data,s.addClass("fa-lock").removeClass("fa-spinner fa-spin"),i.fire({icon:"error",title:u});case 26:case"end":return r.stop()}}),r,null,[[8,20]])})));return function(e){return r.apply(this,arguments)}}()),t("#decloturer_epreuve").on("click",function(){var r=s(regeneratorRuntime.mark((function r(n){var s,o,l,p,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),0!=c.length){r.next=4;break}return i.fire({icon:"error",title:"Veuillez cochez une ou plusieurs ligne!"}),r.abrupt("return");case 4:return(s=t("#decloturer_epreuve i")).removeClass("fa-lock-open").addClass("fa-spinner fa-spin"),(o=new FormData).append("idEpreuves",JSON.stringify(c)),r.prev=8,r.next=11,axios.post("/administration/epreuve/decloture",o);case 11:l=r.sent,p=l.data,s.addClass("fa-lock-open").removeClass("fa-spinner fa-spin"),i.fire({icon:"success",title:p}),c=[],a.ajax.reload(null,!1),e.ajax.reload(null,!1),r.next=26;break;case 20:r.prev=20,r.t0=r.catch(8),console.log(r.t0),u=r.t0.response.data,s.addClass("fa-lock-open").removeClass("fa-spinner fa-spin"),i.fire({icon:"error",title:u});case 26:case"end":return r.stop()}}),r,null,[[8,20]])})));return function(e){return r.apply(this,arguments)}}()),t("#save_list_etudiant").on("click",function(){var r=s(regeneratorRuntime.mark((function r(n){var s,i,o,c,u,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),(s=t("#save_list_etudiant i")).removeClass("fa-check-circle").addClass("fa-spinner fa-spin"),(i=t("#affilier_list_etudiant .modal-body .alert")).remove(),(o=new FormData).append("idInscriptions",JSON.stringify(p)),o.append("idEpreuve",l),r.prev=8,r.next=11,axios.post("/administration/epreuve/affiliation_rattrapage",o);case 11:c=r.sent,u=c.data,s.addClass("fa-check-circle").removeClass("fa-spinner fa-spin"),t("#affilier_list_etudiant .modal-body").prepend('<div class="alert alert-success">\n                    <p>'.concat(u,"</p>\n                  </div>")),t(".list_etudiants").empty(),a.ajax.reload(null,!1),e.ajax.reload(null,!1),r.next=27;break;case 20:r.prev=20,r.t0=r.catch(8),console.log(r.t0),d=r.t0.response.data,i.remove(),t("#affilier_list_etudiant .modal-body").prepend('<div class="alert alert-danger">'.concat(d,"</div>")),s.addClass("fa-check-circle").removeClass("fa-spinner fa-spin");case 27:case"end":return r.stop()}}),r,null,[[8,20]])})));return function(e){return r.apply(this,arguments)}}()),t("select").select2(),t("#etablissement").on("change",s(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t(this).val(),r="",""==a){e.next=7;break}return e.next=5,axios.get("/api/formation/"+a);case 5:n=e.sent,r=n.data;case 7:t("#element").html("").select2(),t("#module").html("").select2(),t("#semestre").html("").select2(),t("#promotion").html("").select2(),t("#formation").html(r).select2();case 12:case"end":return e.stop()}}),e,this)})))),t("#formation").on("change",s(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t(this).val(),r="",""==a){e.next=7;break}return e.next=5,axios.get("/api/promotion/"+a);case 5:n=e.sent,r=n.data;case 7:t("#element").html("").select2(),t("#module").html("").select2(),t("#semestre").html("").select2(),t("#promotion").html(r).select2();case 11:case"end":return e.stop()}}),e,this)})))),t("#promotion").on("change",s(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(a=t(this).val())){e.next=10;break}return e.next=4,axios.get("/api/semestre/"+a);case 4:return r=e.sent,response=r.data,e.next=8,axios.get("/api/niv1/"+a);case 8:n=e.sent,niv1=n.data;case 10:t("#element").html("").select2(),t("#module").html("").select2(),t("#semestre").html(response).select2();case 13:case"end":return e.stop()}}),e,this)})))),t("#semestre").on("change",s(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(a=t(this).val())){e.next=6;break}return e.next=4,axios.get("/api/module/"+a);case 4:r=e.sent,response=r.data;case 6:t("#element").html("").select2(),t("#module").html(response).select2();case 8:case"end":return e.stop()}}),e,this)})))),t("#module").on("change",s(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(a=t(this).val())){e.next=6;break}return e.next=4,axios.get("/api/element/"+a);case 4:r=e.sent,response=r.data;case 6:t("#element").html(response).select2();case 7:case"end":return e.stop()}}),e,this)})))),t("#ajouter_epreuve").on("click",(function(e){e.preventDefault(),t("#ajouter_epreuve-modal").modal("show")})),t("body").on("submit","#add_epreuve",function(){var r=s(regeneratorRuntime.mark((function r(n){var s,i,o,l,c,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),s=new FormData(t("#add_epreuve")[0]),(i=t("#ajouter_epreuve-modal .modal-body .alert")).remove(),(o=t("#ajouter_epreuve-modal button i")).removeClass("fa-check").addClass("fa-spinner fa-spin"),r.prev=6,r.next=9,axios.post("/administration/epreuve/add_epreuve",s);case 9:l=r.sent,c=l.data,t("#ajouter_epreuve-modal .modal-body").prepend('<div class="alert alert-success" style="width: 98%;margin: 0 auto;">\n                  <p>'.concat(c,"</p>\n                </div>")),o.addClass("fa-check").removeClass("fa-spinner fa-spin "),e.ajax.reload(null,!1),a.ajax.reload(null,!1),r.next=23;break;case 17:r.prev=17,r.t0=r.catch(6),p=r.t0.response.data,i.remove(),t("#ajouter_epreuve-modal .modal-body").prepend('<div class="alert alert-danger" style="width: 98%;margin: 0 auto;">'.concat(p,"</div>")),o.addClass("fa-check").removeClass("fa-spinner fa-spin ");case 23:setTimeout((function(){t(".modal-body .alert").remove()}),2500);case 24:case"end":return r.stop()}}),r,null,[[6,17]])})));return function(e){return r.apply(this,arguments)}}()),t("#import_epreuve").on("click",(function(){t("#import_en_masse").modal("show"),t("#import_en_masse .modal-body .alert").remove()})),t("#epreuve_imprimer").on("click",function(){var e=s(regeneratorRuntime.mark((function e(a){var r,n,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),l){e.next=4;break}return i.fire({icon:"error",title:"Veuillez selection une ligne!"}),e.abrupt("return");case 4:return(r=t("#epreuve_imprimer i")).removeClass("fa-copy").addClass("fa-spinner fa-spin"),e.prev=6,e.next=9,axios.get("/administration/epreuve/checkifanonymat/"+l);case 9:n=e.sent,s=n.data,console.log(s),r.addClass("fa-copy").removeClass("fa-spinner fa-spin "),t("#imprimer_epreuve").modal("show"),t("#imprimer_epreuve .etudiant_info").html(s.html),t("#imprimer_epreuve .epreuve_title").html(s.id),"oui"==s.anonymat?t("#imprimer_epreuve .actions").html('<a href="#" class="btn btn-success mt-3" id="impression_clair">Impression Clair</a>\n                    <a href="#" class="btn btn-secondary mt-3" id="impression_anonymat">Impression Anonymat</a>'):t("#imprimer_epreuve .actions").html('<a href="#" class="btn btn-success mt-3" id="impression_clair">Impression Clair</a>'),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(6),console.log(e.t0),o=e.t0.response.data,i.fire({icon:"error",title:o}),r.addClass("fa-copy").removeClass("fa-spinner fa-spin ");case 25:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(a){return e.apply(this,arguments)}}()),t("#modifier_epreuve").on("click",function(){var e=s(regeneratorRuntime.mark((function e(a){var r,n,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),l){e.next=4;break}return i.fire({icon:"error",title:"Veuillez selection une ligne!"}),e.abrupt("return");case 4:return(r=t("#modifier_epreuve i")).removeClass("fa-edit").addClass("fa-spinner fa-spin"),e.prev=6,e.next=9,axios.get("/administration/epreuve/edit/"+l);case 9:n=e.sent,s=n.data,r.addClass("fa-edit").removeClass("fa-spinner fa-spin "),t("#modifier_epreuve-modal").modal("show"),t("#modifier_epreuve-modal #edit_epreuve").html(s),t("select").select2(),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(6),console.log(e.t0),o=e.t0.response.data,i.fire({icon:"error",title:o}),r.addClass("fa-edit").removeClass("fa-spinner fa-spin ");case 23:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(a){return e.apply(this,arguments)}}()),t("#edit_epreuve").on("submit",function(){var r=s(regeneratorRuntime.mark((function r(n){var s,o,c,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),(s=t("#edit_epreuve button i")).removeClass("fa-check").addClass("fa-spinner fa-spin"),o=new FormData(t(this)[0]),r.prev=4,r.next=7,axios.post("/administration/epreuve/update/"+l,o);case 7:c=r.sent,c.data,s.addClass("fa-check").removeClass("fa-spinner fa-spin "),t("#modifier_epreuve-modal").modal("hide"),e.ajax.reload(null,!1),a.ajax.reload(null,!1),r.next=21;break;case 15:r.prev=15,r.t0=r.catch(4),console.log(r.t0),p=r.t0.response.data,i.fire({icon:"error",title:p}),s.addClass("fa-check").removeClass("fa-spinner fa-spin ");case 21:case"end":return r.stop()}}),r,this,[[4,15]])})));return function(e){return r.apply(this,arguments)}}()),t("body").on("click","#impression_clair",(function(e){e.preventDefault(),window.open("/administration/epreuve/impression/"+l+"/0","_blank")})),t("body").on("click","#impression_anonymat",(function(e){e.preventDefault(),window.open("/administration/epreuve/impression/"+l+"/1","_blank")})),t("#capitaliser_etudiant").on("click",function(){var e=s(regeneratorRuntime.mark((function e(a){var r,n,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),0!=c.length){e.next=4;break}return i.fire({icon:"error",title:"Veuillez cochez une ou plusieurs ligne!"}),e.abrupt("return");case 4:return(r=t("#capitaliser_etudiant i")).removeClass("fab fa-get-pocket").addClass("fa fa-spinner fa-spin"),(n=new FormData).append("idEpreuves",JSON.stringify(c)),e.prev=8,e.next=11,axios.post("/administration/epreuve/capitaliser",n);case 11:s=e.sent,o=s.data,console.log(o),r.addClass("fab fa-get-pocket").removeClass("fa fa-spinner fa-spin "),o.count>0?window.open("/"+o.fileName,"_blank"):i.fire({icon:"info",title:"Epreuves no capitaliser"}),c=[],e.next=25;break;case 19:e.prev=19,e.t0=e.catch(8),console.log(e.t0),l=e.t0.response.data,i.fire({icon:"error",title:l}),r.addClass("fab fa-get-pocket").removeClass("fa fa-spinner fa-spin ");case 25:case"end":return e.stop()}}),e,null,[[8,19]])})));return function(a){return e.apply(this,arguments)}}())}))}},e=>{e.O(0,[9755,6488,8029,9523],(()=>{return a=3967,e(e.s=a);var a}));e.O()}]);